[user]
    email = yubo@blend.com
    name = Yubo Su
[push]
    default = simple
[color]
    diff = always
    status = always
    branch = always
[merge]
    conflictstyle = diff3
[core]
    editor = vim
    excludesfile = ~/.globalgitignore
[alias]
    al = config --get-regex alias
    bn = rev-parse --abbrev-ref HEAD

    # add cwd vs add all
    a = !cd ${GIT_PREFIX:-.} && git add . && git s
    aa = !git add . && git s
    c = commit -m
    ca = commit -a -m
    s = status
    l = log
    lg = log --graph --decorate --oneline
    rc = rm --cached

    f = fetch -p
    p = push
    pf = push --force
    pu = !git p --set-upstream origin $(git bn)
    puf = !git p --set-upstream origin $(git bn) --force
    pl = pull
    plf = pull --force
    pm = pull origin master
    mb = merge-base HEAD origin/master

    st = stash
    sa = stash apply
    rh = reset --hard HEAD
    rh1= reset --hard HEAD^1
    rhm = reset --hard origin/master

    b = branch
    bd = branch -D
    bdr = !git branch -D $(git branch --no-color --no-column | grep -v '^\\*')
    bda = !git cm && git bdr
    ch = checkout
    cm = checkout master
    cb = checkout -b
    dh1 = diff HEAD^1
    d = "!f() { git diff ${1:-HEAD}; }; f"

    dm = !git diff $(git mb)
    plp = !git pull && git fetch -p && git gc && git prune
    pmp = !git pm --no-edit && git p
    sps = !git stash && git pl && git sa
    spms = !git stash && git pm && git sa
    bdm = !export _CURR_GIT=$(git bn) && git cmp && git branch -D $_CURR_GIT
    cmp = !git ch master && git plp

    rebasestaging = !export _CURR_GIT=$(git bn) && git rebase --onto origin/staging origin/master HEAD && git branch -D $_CURR_GIT && git checkout -b $_CURR_GIT
    deletehistory = !git checkout --orphan _master && git add -A && git commit -am "initial" && git branch -D master && git branch -m master && git push --set-upstream origin $(git bn) --force
